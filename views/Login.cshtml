@using Blog.App.Code
@using BlogExtensions.Resources

@{
    Page.Title = Index.SignIn;
    Layout = "~/themes/" + Blog.Theme + "/_Layout.cshtml";
    Response.Cache.SetCacheability(HttpCacheability.NoCache);

    if (Request.HttpMethod == "POST")
    {
        string username = Request.Form["username"];
        string password = Request.Form["password"];
        string remember = Request.Form["remember"];

        if (!string.IsNullOrEmpty(username) && !string.IsNullOrEmpty(password))
        {
            if (FormsAuthentication.Authenticate(username, password))
            {
                FormsAuthentication.RedirectFromLoginPage(username, remember == "on");
            }
        }
        else if (!string.IsNullOrEmpty(Request.QueryString["signout"]))
        {
            FormsAuthentication.SignOut();
            Response.Redirect(Request.QueryString["ReturnUrl"], true);
        }
    }
}

@if (!User.Identity.IsAuthenticated)
{
    <div class="login">
        <form action="@Request.RawUrl" method="post" role="form" class="pure-form pure-form-stacked" id="login">
            <div class="pure-g-r">

                @if (Request.HttpMethod == "POST")
                {
                    <p class="alert alert-danger">@Index.LoginIncorrect</p>
                }

                <div class="pure-u-1-2">
                    <input type="text" id="username" name="username" class="pure-input-1" placeholder="@Index.Username" required autofocus />
                </div>
                <div class="pure-u-1-2">
                    <input type="password" id="password" name="password" class="pure-input-1" placeholder="@Index.Password" required />
                </div>
            </div> 
            <label for="remember" class="pure-checkbox">
                <input type="checkbox" id="remember" name="remember">@Index.RememberMe
            </label>
            <button type="submit" class="pure-button pure-button-primary">@Index.SignIn</button>
               
</form>

    </div>
}
else
{
    <h3>@Index_Admin.AlreadySignedIn</h3>
}
